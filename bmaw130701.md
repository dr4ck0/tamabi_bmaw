# Toucheをつかってみる

今回からは、いよいよToucheセンサーを自作してタッチ検出に挑戦します。まずは、Toucheのセンサーのハードウェアを制作します。センサーが完成したら、水を入れたコップ、金属製の製品、即物など様々な物体でタッチ検出できるか試してみましょう。後半は、ソフトウェアを解析して、表示や表現の方法を変更するにはどう改造していけば良いのか考えていきます。

## Toucheに必要な材料

ArduinoでToucheセンサーを自作するには以下の部品が必要となります。それぞれのパーツは、どれも入手は難しくないものです。今回はArduinoプロトシールドなどは使用せず、まずはブレッドボードで配線することにします。

* Arduino
* Usbケーブル(ArduinoとPCを接続)
* ブレッドボード
* 抵抗器: 10KΩ, 1MΩ, 3.3KΩ
* コンデンサー: 100pf (絶縁型ラジアルリード型積層セラミックコンデンサー100pF 50V±5%5mmなど [千石電商](http://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=8BNG-TDMS)、[秋月電子通商](http://akizukidenshi.com/catalog/g/gP-03623/))
* コンデンサー: 10nf (絶縁型ラジアルリード型積層セラミックコンデンサー0.01μF 50V±10％5mmなど [秋月電子通商](http://akizukidenshi.com/catalog/g/gP-02281/))
* ダイオード: 1N4148 (汎用小信号高速スイッチング・ダイオード 1N4148 100V200mAなど [千石電商](http://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=7DUC-SCL4)、[秋月電子通商](http://akizukidenshi.com/catalog/g/gI-00941/))
* インダクター: 10mH (太陽誘電 LHLC10NB 103Jインダクタ10mH 0.14Aなど [千石電商](http://www.sengoku.co.jp/mod/sgk_cart/detail.php?code=7A5C-KRDF))


## Toucheハードウェアを制作

まず、Touche for Arduinoの回路図をみてみましょう。この配線を実現するためにブレッドボードにどのようにパーツを配置して、Arduinoと結線していけば良いのか考えていきます。

![image](img/130701/touche_ circuit.jpg)

この回路をブレッドボードで実現する方法はいろいろ考えられます。パズルを解くような気分で配線してみましょう。例えば先週の矢坂先生の授業では以下のような配線を紹介しました。

![image](img/130701/touche_bred1.jpg)


配線を少し簡略化した別バージョンの配線です。

![image](img/130701/touche_bred2.jpg)


これらの配線図を参考に、Toucheセンサーを自作してみましょう。

## Toucheソフトウェアをダウンロード

早速、自作したToucheセンサーを試してみましょう。ソフトウェアは前回と同様下記のGithubアカウントからダウンロードして使用します。

* [https://github.com/Illutron/AdvancedTouchSensing](https://github.com/Illutron/AdvancedTouchSensing)


## ソフトウェアの使い方

Zipファイルをダウンロードして、まず「Arduino_sensing」フォルダ内の「Arduino_sensing.ino」プログラムをArduino.appから開いてボードに書き込みます。次に「Processing_graph」フォルダ内の「Processing_graph.pde」をProcessing.appで開き、Processingを実行してみてください。

すると、下記のような画面が表示されるはずです。

このプログラムは以下のようにして使用します。

* Toucheセンサーを接続
* Arduino_sensing.inoをArduinoに転送
* Processing.appでProcessing_graph.pdeを開いて実行
* センサーで計測された値がグラフで表示される(はず)
* ジェスチャーをして、右側のボタンで登録(全部で4種類まで可能)
* 同じジェスチャーを再現
* 右側のボタンで該当するものが点灯する(はず)


## 様々な物体でのタッチ検出に挑戦!

## ソフトウェアを改造してみる